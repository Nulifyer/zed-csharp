{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Zed C# Debug Adapter Protocol Configuration",
  "description": "JSON schema for C# debug adapter protocol launch and attach configurations",
  "type": "object",
  "properties": {
    "request": {
      "type": "string",
      "enum": ["launch", "attach"],
      "description": "The request type - either 'launch' to start a new process or 'attach' to connect to an existing process"
    }
  },
  "required": ["request"],
  "allOf": [
    {
      "if": {
        "properties": {
          "request": {
            "const": "launch"
          }
        }
      },
      "then": {
        "properties": {
          "request": true,
          "program": {
            "type": "string",
            "pattern": "\\.(dll|exe)$",
            "description": "Path to the executable assembly (.dll or .exe) to launch. This is the main entry point of your .NET application."
          },
          "args": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "default": [],
            "description": "Command line arguments to pass to the program."
          },
          "cwd": {
            "type": "string",
            "description": "Working directory for the launched process. If not specified, defaults to the workspace root directory.",
            "default": "${ZED_WORKTREE_ROOT}"
          },
          "env": {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            },
            "default": {},
            "description": "Environment variables to set for the launched process."
          },
          "stopAtEntry": {
            "type": "boolean",
            "default": false,
            "description": "Whether to stop at the entry point of the program."
          },
          "console": {
            "type": "string",
            "enum": ["internalConsole", "integratedTerminal", "externalTerminal"],
            "default": "internalConsole",
            "description": "Kind of console to use for program output."
          },
          "justMyCode": {
            "type": "boolean",
            "default": true,
            "description": "Enable Just My Code debugging."
          },
          "requireExactSource": {
            "type": "boolean",
            "default": true,
            "description": "Require source files to exactly match the original version."
          },
          "enableStepFiltering": {
            "type": "boolean",
            "default": true,
            "description": "Enable step filtering."
          },
          "logging": {
            "type": "object",
            "properties": {
              "engineLogging": {
                "type": "boolean",
                "default": false,
                "description": "Enable logging of the debug engine."
              }
            }
          }
        },
        "required": ["program"]
      }
    },
    {
      "if": {
        "properties": {
          "request": {
            "const": "attach"
          }
        }
      },
      "then": {
        "properties": {
          "request": true,
          "processId": {
            "oneOf": [
              {
                "type": "integer",
                "minimum": 1,
                "description": "Numeric process ID to attach to"
              },
              {
                "type": "string",
                "pattern": "^[0-9]+$",
                "description": "String representation of process ID to attach to"
              }
            ],
            "description": "The process ID of the running .NET application to attach to."
          },
          "justMyCode": {
            "type": "boolean",
            "default": true,
            "description": "Enable Just My Code debugging."
          },
          "requireExactSource": {
            "type": "boolean",
            "default": true,
            "description": "Require source files to exactly match the original version."
          },
          "enableStepFiltering": {
            "type": "boolean",
            "default": true,
            "description": "Enable step filtering."
          }
        },
        "required": ["processId"]
      }
    }
  ]
}